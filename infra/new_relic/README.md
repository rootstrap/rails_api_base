# Preconditions

## Entities
Create one New Relic entity for each environment. Current setup assumes one entity for "development", "staging" and "production" environments. For example, if your app name is "rails_api_base", it expects to have "rails_api_base - development" entity for dev.

## Slack
Set up the Slack integration from [New Relic](https://docs.newrelic.com/docs/alerts/get-notified/notification-integrations/). You will need to replace `slack_destination_id` local variable with the id generated by the integration, and `slack_channel_id` with the channel id where you want to send notifications.

# Installation

Follow the [Terraform installation docs](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli) to install Terraform CLI.

## Environment variables
Make sure you copy the `.env.sample` file into `.env` and fill all the variables.

## Usage

There are only three commands that need to be run in order to apply this terraform template and fully setup your New Relic monitoring.

```bash
# Init
terraform init

# Plan
terraform plan

# Apply
terraform apply
```

# Docker usage

If you want to use Docker to avoid installing Terraform, we recommend to use one of the latest versions of the Dockerfile.

```bash
# Init
docker run -w /app -v .:/app --env-file .env -it hashicorp/terraform:latest init

# Plan
docker run -w /app -v .:/app --env-file .env -it hashicorp/terraform:latest plan

# Apply
docker run -w /app -v .:/app --env-file .env -it hashicorp/terraform:latest apply
```
